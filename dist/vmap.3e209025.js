parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"4tdS":[function(require,module,exports) {
var t=function(t){t=document.getElementById(t);this.width=600,this.height=400,this.zoom=100,t&&(this.div=t,this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.context.translate(this.width/2,this.height/2),this.canvas.style.backgroundColor="#F5F3EF"),this.maxLng=135,this.minLng=72,this.maxLat=55,this.minLat=5};t.prototype.showMap=function(t){console.log(t),t.getPosition(function(t){document.getElementById("show_lnglat").innerHTML="当前经纬度为:"+t.lng+","+t.lat});$.ajax({url:"http://localhost:3000/province",data:"",dataType:"jsonp",processData:!1,type:"get",success:function(i){var o=i.features;console.log(i);for(var e=0;e<o.length;e++){var n=o[e];"Polygon"==n.geometry.type&&("lvdi"==n.properties.name&&t.drawPolygon(n,"#C2E0B9","#C2E0B9"),"gonglu"==n.properties.name&&t.drawPolygon(n,"#FFC65C","#FFC65C")),"LineString"==n.geometry.type&&"ditie"==n.properties.name&&t.drawLine(n,"#F95A7A"),"Point"==n.geometry.type&&t.drawPoint(n),"Point"==n.geometry.type&&t.drawText(n)}},error:function(t,i,o){console.log(t)}}),t.zoomToEvent()},t.prototype.bounds=function(t,i,o,e){this.maxLng=t||135,this.minLng=i||72,this.maxLat=o||55,this.minLat=e||5},t.prototype.setCanvas=function(t){t.width=this.width,t.height=this.height},t.prototype.getPosition=function(i){var o=this.canvas.getBoundingClientRect(),e=this.width,n=this.height,s=this.maxLng,h=this.minLng,a=this.maxLat,r=this.minLat;this.canvas.addEventListener("mousemove",function(c){var l=0,d=0,c=c||window.event;l=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-o.left+.5,d=c.clientY+document.body.scrollTop+document.documentElement.scrollTop-o.top+1;var m=t.xy2LngLat(e,n,l,d,s,h,a,r);i(m)},!1)},t.lngLat2XY=function(t,i,o,e,n,s,h,a){return{x:3600*(o-(n+s)/2)/(3600*(n-s)/t),y:3600*((h+a)/2-e)/(3600*(h-a)/i)}},t.xy2LngLat=function(t,i,o,e,n,s,h,a){return{lng:o*(3600*(n-s)/t)/3600+s,lat:h-e*(3600*(h-a)/i)/3600}},t.prototype.Point=function(t,i){this.x=t,this.y=i,this.size=1},t.prototype.addPoint=function(i,o){var e=t.lngLat2XY(this.width,this.height,i.x,i.y,this.maxLng,this.minLng,this.maxLat,this.minLat),n=e.x,s=e.y;this.context.fillStyle=o||"#E10602",this.context.beginPath();var h=this.changePosition(n,s,this.zoom);this.context.arc(h.x,h.y,i.size,0,2*Math.PI,!0),this.context.closePath(),this.context.fill();var a=new Image;a.src="images/335.png",_context=this.context,a.onload=function(){_context.drawImage(a,h.x,h.y,15,15)}},t.prototype.drawPoint=function(t,i){var o=t.geometry.coordinates,e=new this.Point(o[0],o[1]);this.addPoint(e,i)},t.prototype.MultiPoint=function(t){this.pointArr=t},t.prototype.addMultiPoint=function(t){for(var i=0;i<t.length;i++){var o=new this.Point(t[i][0],t[i][1]);this.addPoint(o)}},t.prototype.drawMultiPoint=function(t){var i=t.geometry.coordinates;this.addMultiPoint(i)},t.prototype.Line=function(t,i){this.point1=t,this.point2=i},t.prototype.addLine=function(i,o){if(i.length>0){var e=i[0],n=t.lngLat2XY(this.width,this.height,e[0],e[1],this.maxLng,this.minLng,this.maxLat,this.minLat);this.context.strokeStyle=o||"#006FC4",this.context.beginPath(),this.context.lineWidth=2.5;var s=this.changePosition(n.x,n.y,this.zoom);this.context.moveTo(s.x,s.y);for(var h=1;h<i.length;h++){var a=t.lngLat2XY(this.width,this.height,i[h][0],i[h][1],this.maxLng,this.minLng,this.maxLat,this.minLat),r=this.changePosition(a.x,a.y,this.zoom);this.context.lineTo(r.x,r.y)}this.context.stroke()}},t.prototype.drawLine=function(t,i){var o=t.geometry.coordinates;this.addLine(o,i)},t.prototype.addPolygon=function(i,o,e){if(this.context.fillStyle=o||"#EEB14A",this.context.strokeStyle=e||"#D8B1D2",this.context.beginPath(),i.length>0){var n=t.lngLat2XY(this.width,this.height,i[0][0],i[0][1],this.maxLng,this.minLng,this.maxLat,this.minLat),s=this.changePosition(n.x,n.y,this.zoom);this.context.moveTo(s.x,s.y)}for(var h=1;h<i.length;h++){var a=t.lngLat2XY(this.width,this.height,i[h][0],i[h][1],this.maxLng,this.minLng,this.maxLat,this.minLat),r=this.changePosition(a.x,a.y,this.zoom);this.context.lineTo(r.x,r.y)}this.context.closePath(),this.context.fill(),this.context.stroke()},t.prototype.drawPolygon=function(t,i,o){var e=t.geometry.coordinates;this.addPolygon(e,i,o)},t.prototype.addText=function(t,i){this.context.font="12px Arial",this.context.fillStyle=i||"#151515";var o=this.changePosition(t.x,t.y,this.zoom);this.context.fillText(t.text,o.x,o.y)},t.prototype.drawText=function(i,o){var e={},n=i.geometry.coordinates,s=t.lngLat2XY(this.width,this.height,n[0],n[1],this.maxLng,this.minLng,this.maxLat,this.minLat);e.text=i.properties.name,e.x=s.x,e.y=s.y,this.addText(e,o)},t.prototype.changePosition=function(t,i,o){return{x:t*(o/100),y:i*(o/100)}},t.prototype.zoomTo=function(t){this.context.clearRect(-this.width/2,-this.height/2,this.width,this.height),this.zoom=t,this.showMap(map)},t.prototype.moveToLeft=function(t,i,o){return{x:t-o,y:i}},t.prototype.moveToRight=function(t,i,o){return{x:t+o,y:i}},t.prototype.panTo=function(t){this.canvas.addEventListener("mousedown",function(t){t=t||window.event;x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-bounds.left+.5,y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop-bounds.top+1},!1),this.canvas.addEventListener("mouseup",function(t){t=t||window.event;x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-bounds.left+.5,y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop-bounds.top+1},!1)},t.prototype.zoomToEvent=function(){var t=this,i=this.zoom,o=0;this.canvas.addEventListener("mousewheel",function(e){o+=e.wheelDelta;var n=i+o/120*100*.1;n<0&&(n=0);t.zoomTo(n)},!1),this.canvas.addEventListener("dblclick",function(){var e=i+(o+=10);t.zoomTo(e)},!1)},t.prototype.getStyle=function(t){switch(t){case"lvdi":return{fillStyle:"#C2E0B9",strokeStyle:"#C2E0B9"};case"shuiyu":return{fillStyle:"#ACC5E9",strokeStyle:"#ACC5E9"};case"gandao":return{fillStyle:"#FFC65C",strokeStyle:"#EEA62B"};case"zhilu":return{fillStyle:"#FFFDB5",strokeStyle:"#E8DDC2"};case"ditie":return{stroke:"#16A9DC"};case"beijing":return{fillStyle:"#F5F3EF"};case"diming":return{fillStyle:"#568FE3",font_color:"#FAFAFA"};case"xiaolu":return{fillStyle:"#FFFFFF",strokeStyle:"#EFEDE7"};case"jianzhu":return{fillStyle:"#F8F7F3",strokeStyle:"#E6E5E2"};default:return{fillStyle:"NULL",strokeStyle:"NULL"}}};
},{}]},{},["4tdS"], null)
//# sourceMappingURL=vmap.3e209025.map