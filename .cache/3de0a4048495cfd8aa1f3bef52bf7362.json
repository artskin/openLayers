{"id":"openlayers.html","dependencies":[{"name":"/Users/artskin/www/h5game/canvas/vector-map/package.json","includedInParent":true,"mtime":1535526384035},{"name":"./index.js","dynamic":true,"parent":"/Users/artskin/www/h5game/canvas/vector-map/openlayers.html","resolved":"/Users/artskin/www/h5game/canvas/vector-map/index.js"}],"generated":{"html":"<!doctype html>\n<html lang=\"en\">\n  <head>\n    <style>\n      .map {\n        width: 800px;\n        height: 600px;\n        border: 1px dashed #ccc;\n      }\n      .selected{border: 1px dashed #fc0}\n    </style>\n    <title>OpenLayers example</title>\n  <!-- <script src=\"https://cdn.bootcss.com/openlayers/4.6.5/ol.js\"></script>\n  <script>\n  \n        //定义全局变量\n        var map, layer, selectControl, selectedFeature;\n        //关闭弹出窗口的函数\n        function onPopupClose(evt) {\n            selectControl.unselect(selectedFeature);\n        }\n        //构造弹出窗口的函数\n        function onFeatureSelect(feature) {\n            selectedFeature = feature;\n            popup = new Popup.Anchored(\"chicken\",\n                                     feature.geometry.getBounds().getCenterLonLat(),\n                                     new Size(250,75),\n                                     \"<div style='font-size:.8em'>\" + feature.attributes['cq:LNAME'] +\"</div>\",\n                                     null, true, onPopupClose);\n            feature.popup = popup;\n            map.addPopup(popup);\n        }\n        //销毁弹出窗口的函数\n        function onFeatureUnselect(feature) {\n            map.removePopup(feature.popup);\n            feature.popup.destroy();\n            feature.popup = null;\n        }\n        //地图和页面加载函数\n        window.onload = function(){\n          console.log(ol)\n          map = new ol.Map({\n            target: 'map',\n            maxScale: 500, minScale: 500000, numZoomLevels: 5,\n            layers: [\n              new ol.layer.WMS( \"District\",\"http://192.98.151.17:8081/geoserver/wms\", {layers: 'cq:GMAP_DISTRICT'} ),\n              new ol.Layer.WMS( \"Water\",\"http://192.98.151.17:8081/geoserver/wms\", {layers: 'cq:GMAP_LAKE', 'transparent': true, format: 'image/png' } ),\n              new ol.Layer.WFS( \"Unit\",\n                    \"http://192.98.151.17:8081/geoserver/wfs\", {typename: 'cq:GPOI_GOV'},\n               { \n                      typename: 'unit',\n                      featureNS: 'http://www.openplans.org/cq',\n                      extractAttributes: true,\n                      maxfeatures: 10,\n                      textAttrToDisplay: 'lname'\n               } )\n            ],\n            view: new ol.View({\n              center: ol.proj.fromLonLat([37.41, 8.82]),\n              zoom: 4\n            })\n          });\n            //设置地图缩放范围和缩放等级，0级比例尺最小\n            \n            //加载行政区图层，WMS栅格图像\n            \n            //加载水系图层，WMS栅格图像\n            \n            //加载单位图层，WFS矢量数据，由openlayers在客户端绘制，注意：数量太多会导致速度缓慢\n            \n            //在地图上添加按钮和工具条\n            zb = new Control.ZoomBox();\n            var panel = new Control.Panel({defaultControl: zb});\n            selectControl = new Control.SelectFeature(layer, {onSelect: onFeatureSelect, onUnselect: onFeatureUnselect, hover: true});\n            panel.addControls([\n                new Control.MouseDefaults(), zb, selectControl\n            ]);\n            map.addControl(panel);\n          \n            map.addControl(new Control.PanZoomBar({zoomWorldIcon:false}));\n            map.addControl(new Control.LayerSwitcher({'ascending':false}));\n            map.addControl(new Control.MousePosition());\n            //设置初始地图的中心坐标和缩放等级\n            map.setCenter(new LonLat(106.5, 29.5), 3);\n        }\n        </script> -->\n  </head>\n  <body>\n    <h2>My Map</h2>\n    \n    <form class=\"form-inline\">\n      <label>Geometry type &nbsp;</label>\n      <!-- <select id=\"type\">\n        <option value=\"Polygon\">Polygon</option>\n        <option value=\"Point\">Point</option>\n        <option value=\"LineString\">LineString</option>\n        <option value=\"Circle\">Circle</option>\n      </select> -->\n    </form>\n    <div id=\"panel\"></div>\n    <div id=\"toolbar\">\n      <div id=\"type\">\n        <i class=\"Polygon\" id=\"Polygon\">多边形</i>\n        <i class=\"Point\" id=\"Point\">摄像头</i>\n        <i class=\"Circle\" id=\"Circle\">圆形</i>\n      </div>\n    </div>\n  <div id=\"map\" class=\"map\"></div>\n  <textarea style=\"display:none\" id=\"serialize\" cols=\"96\" rows=\"10\"></textarea>\n  \n  <script src=\"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js\"></script>\n  <script src=\"https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL\"></script>\n  <script src=\"/0a2edfed02ca0d32bea9606ac005d75a.js\"></script>\n  \n  </body>\n</html>"},"hash":"1ced9c41475dc743f3e9de20a78cbb45","cacheData":{}}